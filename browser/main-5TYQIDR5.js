import{a as ce,b as ae,c as fe,d as ue,e as de,f as pe,h as le,j as he,k as me,l as Oe,m as Te,n as Ae,p as be}from"./chunk-YXHVI7FM.js";import{a as Ee,b as ge,d as mt,e as W,f as Se,g as ye,h as Ie,i as Et,j as Y,k as ve,l as L,o as gt,p as St,q as xe,t as Q,u as yt,v as Ce}from"./chunk-YWK6DLDI.js";import{$ as x,A as P,B as R,C as F,D as Bt,E as Ht,Ea as ee,G as X,H as Gt,I as Vt,K as Kt,N as pt,Q as Zt,S as Xt,T as qt,Ta as ne,U as Jt,Ua as N,W as lt,X as q,Ya as re,Z as Wt,a as w,aa as k,b as z,ca as O,da as l,ea as y,fa as ht,g as B,ha as Yt,hb as _,ib as $,j as Nt,jb as oe,l as _t,m as $t,n as Lt,o as Ut,q as M,qa as J,qb as G,sa as Qt,u as zt,v as T,vb as ie,x as H,ya as te,yb as se}from"./chunk-BSOXDV5B.js";var Re=[{path:"",loadChildren:()=>import("./chunk-3EEEIDHU.js").then(t=>t.HOME_ROUTES)},{path:"products",loadChildren:()=>import("./chunk-O5J2EKTW.js").then(t=>t.PRODUCTS_ROUTES)},{path:"cart",loadChildren:()=>import("./chunk-LEEY6G3E.js").then(t=>t.CART_ROUTES)}];var Sn={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},et="__@ngrx/effects_create__";function Fe(t,e={}){let o=e.functional?t:t(),n=w(w({},Sn),e);return Object.defineProperty(o,et,{value:n}),o}function yn(t){return Object.getOwnPropertyNames(t).filter(n=>t[n]&&t[n].hasOwnProperty(et)?t[n][et].hasOwnProperty("dispatch"):!1).map(n=>{let r=t[n][et];return w({propertyName:n},r)})}function In(t){return yn(t)}function De(t){return Object.getPrototypeOf(t)}function vn(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Pe(t){return typeof t=="function"}function we(t){return t.filter(Pe)}function xn(t){return t instanceof O||Pe(t)}function On(t,e,o){let n=De(t),i=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,f=In(t).map(({propertyName:c,dispatch:g,useEffectsErrorHandler:d})=>{let a=typeof t[c]=="function"?t[c]():t[c],s=d?o(a,e):a;return g===!1?s.pipe(Gt()):s.pipe(Zt()).pipe(T(I=>({effect:t[c],notification:I,propertyName:c,sourceName:i,sourceInstance:t})))});return P(...f)}var Tn=10;function ke(t,e,o=Tn){return t.pipe(F(n=>(e&&e.handleError(n),o<=1?t:ke(t,e,o-1))))}var Ne=(()=>{let e=class e extends B{constructor(n){super(),n&&(this.source=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}};e.\u0275fac=function(r){return new(r||e)(l(Y))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _e(...t){return R(e=>t.some(o=>typeof o=="string"?o===e.type:o.type===e.type))}var $e=new O("@ngrx/effects Internal Root Guard"),tt=new O("@ngrx/effects User Provided Effects"),It=new O("@ngrx/effects Internal Root Effects"),Le=new O("@ngrx/effects Internal Root Effects Instances"),je=new O("@ngrx/effects Internal Feature Effects"),Ue=new O("@ngrx/effects Internal Feature Effects Instance Groups"),An=new O("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>ke}),ze="@ngrx/effects/init",hr=ge(ze);function bn(t,e){if(t.notification.kind==="N"){let o=t.notification.value;!Cn(o)&&e.handleError(new Error(`Effect ${Rn(t)} dispatched an invalid action: ${wn(o)}`))}}function Cn(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function Rn({propertyName:t,sourceInstance:e,sourceName:o}){let n=typeof e[t]=="function";return!!o?`"${o}.${String(t)}${n?"()":""}"`:`"${String(t)}()"`}function wn(t){try{return JSON.stringify(t)}catch{return t}}var jn="ngrxOnIdentifyEffects";function Mn(t){return vt(t,jn)}var Fn="ngrxOnRunEffects";function Dn(t){return vt(t,Fn)}var Pn="ngrxOnInitEffects";function kn(t){return vt(t,Pn)}function vt(t,e){return t&&e in t&&typeof t[e]=="function"}var Be=(()=>{let e=class e extends Nt{constructor(n,r){super(),this.errorHandler=n,this.effectsErrorHandler=r}addEffects(n){this.next(n)}toActions(){return this.pipe(pt(n=>vn(n)?De(n):n),H(n=>n.pipe(pt(Nn))),H(n=>{let r=n.pipe(Kt(f=>_n(this.errorHandler,this.effectsErrorHandler)(f)),T(f=>(bn(f,this.errorHandler),f.notification)),R(f=>f.kind==="N"&&f.value!=null),Vt()),i=n.pipe(X(1),R(kn),T(f=>f.ngrxOnInitEffects()));return P(r,i)}))}};e.\u0275fac=function(r){return new(r||e)(l(J),l(An))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Nn(t){return Mn(t)?t.ngrxOnIdentifyEffects():""}function _n(t,e){return o=>{let n=On(o,t,e);return Dn(o)?o.ngrxOnRunEffects(n):n}}var He=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(n,r){this.effectSources=n,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(l(Be),l(L))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ge=(()=>{let e=class e{constructor(n,r,i,f,c,g,d){this.sources=n,r.start();for(let a of f)n.addEffects(a);i.dispatch({type:ze})}addEffects(n){this.sources.addEffects(n)}};e.\u0275fac=function(r){return new(r||e)(l(Be),l(He),l(L),l(Le),l(gt,8),l(St,8),l($e,8))},e.\u0275mod=N({type:e}),e.\u0275inj=k({});let t=e;return t})(),$n=(()=>{let e=class e{constructor(n,r,i,f){let c=r.flat();for(let g of c)n.addEffects(g)}};e.\u0275fac=function(r){return new(r||e)(l(Ge),l(Ue),l(gt,8),l(St,8))},e.\u0275mod=N({type:e}),e.\u0275inj=k({});let t=e;return t})(),Ve=(()=>{let e=class e{static forFeature(...n){let r=n.flat(),i=we(r);return{ngModule:$n,providers:[i,{provide:je,multi:!0,useValue:r},{provide:tt,multi:!0,useValue:[]},{provide:Ue,multi:!0,useFactory:Me,deps:[je,tt]}]}}static forRoot(...n){let r=n.flat(),i=we(r);return{ngModule:Ge,providers:[i,{provide:It,useValue:[r]},{provide:$e,useFactory:Ln},{provide:tt,multi:!0,useValue:[]},{provide:Le,useFactory:Me,deps:[It,tt]}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=N({type:e}),e.\u0275inj=k({});let t=e;return t})();function Me(t,e){let o=[];for(let n of t)o.push(...n);for(let n of e)o.push(...n);return o.map(n=>xn(n)?y(n):n)}function Ln(){let t=y(He,{optional:!0,skipSelf:!0}),e=y(It,{self:!0});if(!(e.length===1&&e[0].length===0)&&t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var Z="PERFORM_ACTION",Un="REFRESH",We="RESET",Ye="ROLLBACK",Qe="COMMIT",tn="SWEEP",en="TOGGLE_ACTION",zn="SET_ACTIONS_ACTIVE",nn="JUMP_TO_STATE",rn="JUMP_TO_ACTION",Pt="IMPORT_STATE",on="LOCK_CHANGES",sn="PAUSE_RECORDING",U=class{constructor(e,o){if(this.action=e,this.timestamp=o,this.type=Z,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},xt=class{constructor(){this.type=Un}},Ot=class{constructor(e){this.timestamp=e,this.type=We}},Tt=class{constructor(e){this.timestamp=e,this.type=Ye}},At=class{constructor(e){this.timestamp=e,this.type=Qe}},bt=class{constructor(){this.type=tn}},Ct=class{constructor(e){this.id=e,this.type=en}};var Rt=class{constructor(e){this.index=e,this.type=nn}},wt=class{constructor(e){this.actionId=e,this.type=rn}},jt=class{constructor(e){this.nextLiftedState=e,this.type=Pt}},Mt=class{constructor(e){this.status=e,this.type=on}},Ft=class{constructor(e){this.status=e,this.type=sn}};var it=new O("@ngrx/store-devtools Options"),Ke=new O("@ngrx/store-devtools Initial Config");function cn(){return null}var Bn="NgRx Store DevTools";function Hn(t){let e={maxAge:!1,monitor:cn,actionSanitizer:void 0,stateSanitizer:void 0,name:Bn,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof t=="function"?t():t,n=o.logOnly?{pause:!0,export:!0,test:!0}:!1,r=o.features||n||e.features;r.import===!0&&(r.import="custom");let i=Object.assign({},e,{features:r},o);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function Ze(t,e){return t.filter(o=>e.indexOf(o)<0)}function an(t){let{computedStates:e,currentStateIndex:o}=t;if(o>=e.length){let{state:r}=e[e.length-1];return r}let{state:n}=e[o];return n}function K(t){return new U(t,+Date.now())}function Gn(t,e){return Object.keys(e).reduce((o,n)=>{let r=Number(n);return o[r]=fn(t,e[r],r),o},{})}function fn(t,e,o){return z(w({},e),{action:t(e.action,o)})}function Vn(t,e){return e.map((o,n)=>({state:un(t,o.state,n),error:o.error}))}function un(t,e,o){return t(e,o)}function dn(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function Kn(t,e,o,n){let r=[],i={},f=[];return t.stagedActionIds.forEach((c,g)=>{let d=t.actionsById[c];d&&(g&&kt(t.computedStates[g],d,e,o,n)||(i[c]=d,r.push(c),f.push(t.computedStates[g])))}),z(w({},t),{stagedActionIds:r,actionsById:i,computedStates:f})}function kt(t,e,o,n,r){let i=o&&!o(t,e.action),f=n&&!e.action.type.match(n.map(g=>Xe(g)).join("|")),c=r&&e.action.type.match(r.map(g=>Xe(g)).join("|"));return i||f||c}function Xe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pn(t){return{ngZone:t?y(re):null,connectInZone:t}}var st=(()=>{let e=class e extends W{};e.\u0275fac=(()=>{let n;return function(i){return(n||(n=te(e)))(i||e)}})(),e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),nt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Dt=new O("@ngrx/store-devtools Redux Devtools Extension"),ln=(()=>{let e=class e{constructor(n,r,i){this.config=r,this.dispatcher=i,this.zoneConfig=pn(this.config.connectInZone),this.devtoolsExtension=n,this.createActionStreams()}notify(n,r){if(this.devtoolsExtension)if(n.type===Z){if(r.isLocked||r.isPaused)return;let i=an(r);if(dn(this.config)&&kt(i,n,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let f=this.config.stateSanitizer?un(this.config.stateSanitizer,i,r.currentStateIndex):i,c=this.config.actionSanitizer?fn(this.config.actionSanitizer,n,r.nextActionId):n;this.sendToReduxDevtools(()=>this.extensionConnection.send(c,f))}else{let i=z(w({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?Gn(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?Vn(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new B(n=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(i=>n.next(i)),r.unsubscribe}):Lt}createActionStreams(){let n=this.createChangesObservable().pipe(qt()),r=n.pipe(R(a=>a.type===nt.START)),i=n.pipe(R(a=>a.type===nt.STOP)),f=n.pipe(R(a=>a.type===nt.DISPATCH),T(a=>this.unwrapAction(a.payload)),Bt(a=>a.type===Pt?this.dispatcher.pipe(R(s=>s.type===Et),zt(1e3),Ht(1e3),T(()=>a),F(()=>M(a)),X(1)):M(a))),g=n.pipe(R(a=>a.type===nt.ACTION),T(a=>this.unwrapAction(a.payload))).pipe(q(i)),d=f.pipe(q(i));this.start$=r.pipe(q(i)),this.actions$=this.start$.pipe(lt(()=>g)),this.liftedActions$=this.start$.pipe(lt(()=>d))}unwrapAction(n){return typeof n=="string"?(0,eval)(`(${n})`):n}getExtensionConfig(n){let r={name:n.name,features:n.features,serialize:n.serialize,autoPause:n.autoPause??!1,trace:n.trace??!1,traceLimit:n.traceLimit??75};return n.maxAge!==!1&&(r.maxAge=n.maxAge),r}sendToReduxDevtools(n){try{n()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}};e.\u0275fac=function(r){return new(r||e)(l(Dt),l(it),l(st))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),ot={type:mt},Zn="@ngrx/store-devtools/recompute",Xn={type:Zn};function hn(t,e,o,n,r){if(n)return{state:o,error:"Interrupted by an error up the chain"};let i=o,f;try{i=t(o,e)}catch(c){f=c.toString(),r.handleError(c)}return{state:i,error:f}}function rt(t,e,o,n,r,i,f,c,g){if(e>=t.length&&t.length===i.length)return t;let d=t.slice(0,e),a=i.length-(g?1:0);for(let s=e;s<a;s++){let h=i[s],I=r[h].action,p=d[s-1],u=p?p.state:n,b=p?p.error:void 0,C=f.indexOf(h)>-1?p:hn(o,I,u,b,c);d.push(C)}return g&&d.push(t[t.length-1]),d}function qn(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:K(ot)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Jn(t,e,o,n,r={}){return i=>(f,c)=>{let{monitorState:g,actionsById:d,nextActionId:a,stagedActionIds:s,skippedActionIds:h,committedState:I,currentStateIndex:p,computedStates:u,isLocked:b,isPaused:v}=f||e;f||(d=Object.create(d));function C(S){let E=S,j=s.slice(1,E+1);for(let A=0;A<j.length;A++)if(u[A+1].error){E=A,j=s.slice(1,E+1);break}else delete d[j[A]];h=h.filter(A=>j.indexOf(A)===-1),s=[0,...s.slice(E+1)],I=u[E].state,u=u.slice(E),p=p>E?p-E:0}function D(){d={0:K(ot)},a=1,s=[0],h=[],I=u[p].state,p=0,u=[]}let m=0;switch(c.type){case on:{b=c.status,m=1/0;break}case sn:{v=c.status,v?(s=[...s,a],d[a]=new U({type:"@ngrx/devtools/pause"},+Date.now()),a++,m=s.length-1,u=u.concat(u[u.length-1]),p===s.length-2&&p++,m=1/0):D();break}case We:{d={0:K(ot)},a=1,s=[0],h=[],I=t,p=0,u=[];break}case Qe:{D();break}case Ye:{d={0:K(ot)},a=1,s=[0],h=[],p=0,u=[];break}case en:{let{id:S}=c;h.indexOf(S)===-1?h=[S,...h]:h=h.filter(j=>j!==S),m=s.indexOf(S);break}case zn:{let{start:S,end:E,active:j}=c,A=[];for(let dt=S;dt<E;dt++)A.push(dt);j?h=Ze(h,A):h=[...h,...A],m=s.indexOf(S);break}case nn:{p=c.index,m=1/0;break}case rn:{let S=s.indexOf(c.actionId);S!==-1&&(p=S),m=1/0;break}case tn:{s=Ze(s,h),h=[],p=Math.min(p,s.length-1);break}case Z:{if(b)return f||e;if(v||f&&kt(f.computedStates[p],c,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let E=u[u.length-1];u=[...u.slice(0,-1),hn(i,c.action,E.state,E.error,o)],m=1/0;break}r.maxAge&&s.length===r.maxAge&&C(1),p===s.length-1&&p++;let S=a++;d[S]=c,s=[...s,S],m=s.length-1;break}case Pt:{({monitorState:g,actionsById:d,nextActionId:a,stagedActionIds:s,skippedActionIds:h,committedState:I,currentStateIndex:p,computedStates:u,isLocked:b,isPaused:v}=c.nextLiftedState);break}case mt:{m=0,r.maxAge&&s.length>r.maxAge&&(u=rt(u,m,i,I,d,s,h,o,v),C(s.length-r.maxAge),m=1/0);break}case Et:{if(u.filter(E=>E.error).length>0)m=0,r.maxAge&&s.length>r.maxAge&&(u=rt(u,m,i,I,d,s,h,o,v),C(s.length-r.maxAge),m=1/0);else{if(!v&&!b){p===s.length-1&&p++;let E=a++;d[E]=new U(c,+Date.now()),s=[...s,E],m=s.length-1,u=rt(u,m,i,I,d,s,h,o,v)}u=u.map(E=>z(w({},E),{state:i(E.state,Xn)})),p=s.length-1,r.maxAge&&s.length>r.maxAge&&C(s.length-r.maxAge),m=1/0}break}default:{m=1/0;break}}return u=rt(u,m,i,I,d,s,h,o,v),g=n(g,c),{monitorState:g,actionsById:d,nextActionId:a,stagedActionIds:s,skippedActionIds:h,committedState:I,currentStateIndex:p,computedStates:u,isLocked:b,isPaused:v}}}var qe=(()=>{let e=class e{constructor(n,r,i,f,c,g,d,a){let s=qn(d,a.monitor),h=Jn(d,s,g,a.monitor,a),I=P(P(r.asObservable().pipe(Jt(1)),f.actions$).pipe(T(K)),n,f.liftedActions$).pipe(Ut($t)),p=i.pipe(T(h)),u=pn(a.connectInZone),b=new _t(1);this.liftedStateSubscription=I.pipe(Wt(p),Je(u),Xt(({state:D},[m,S])=>{let E=S(D,m);return m.type!==Z&&dn(a)&&(E=Kn(E,a.predicate,a.actionsSafelist,a.actionsBlocklist)),f.notify(m,E),{state:E,action:m}},{state:s,action:null})).subscribe(({state:D,action:m})=>{if(b.next(D),m.type===Z){let S=m.action;c.next(S)}}),this.extensionStartSubscription=f.start$.pipe(Je(u)).subscribe(()=>{this.refresh()});let v=b.asObservable(),C=v.pipe(T(an));Object.defineProperty(C,"state",{value:Ee(C,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=n,this.liftedState=v,this.state=C}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(n){this.dispatcher.next(n)}next(n){this.dispatcher.next(n)}error(n){}complete(){}performAction(n){this.dispatch(new U(n,+Date.now()))}refresh(){this.dispatch(new xt)}reset(){this.dispatch(new Ot(+Date.now()))}rollback(){this.dispatch(new Tt(+Date.now()))}commit(){this.dispatch(new At(+Date.now()))}sweep(){this.dispatch(new bt)}toggleAction(n){this.dispatch(new Ct(n))}jumpToAction(n){this.dispatch(new wt(n))}jumpToState(n){this.dispatch(new Rt(n))}importState(n){this.dispatch(new jt(n))}lockChanges(n){this.dispatch(new Mt(n))}pauseRecording(n){this.dispatch(new Ft(n))}};e.\u0275fac=function(r){return new(r||e)(l(st),l(W),l(ye),l(ln),l(Y),l(J),l(Se),l(it))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})();function Je({ngZone:t,connectInZone:e}){return o=>e?new B(n=>o.subscribe({next:r=>t.run(()=>n.next(r)),error:r=>t.run(()=>n.error(r)),complete:()=>t.run(()=>n.complete())})):o}var Wn=new O("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Yn(t,e){return!!t||e.monitor!==cn}function Qn(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function tr(t){return t.state}function er(t={}){return ht([ln,st,qe,{provide:Ke,useValue:t},{provide:Wn,deps:[Dt,it],useFactory:Yn},{provide:Dt,useFactory:Qn},{provide:it,deps:[Ke],useFactory:Hn},{provide:ve,deps:[qe],useFactory:tr},{provide:Ie,useExisting:st}])}var mn=(()=>{let e=class e{static instrument(n={}){return{ngModule:e,providers:[er(n)]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=N({type:e}),e.\u0275inj=k({});let t=e;return t})();var ct=class t{_http=y(fe);fetchAll(){return typeof window>"u"?M([]):this._http.get("/products.json").pipe(F(e=>(console.error("Products fetch error",e),M([]))))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})};var at=class t{actions$=y(Ne);productsService=y(ct);loadProducts$=Fe(()=>this.actions$.pipe(_e(Oe),H(()=>this.productsService.fetchAll().pipe(T(e=>Te({products:e})),F(e=>M(Ae({error:e})))))));static \u0275fac=function(o){return new(o||t)};static \u0275prov=x({token:t,factory:t.\u0275fac})};var En={providers:[ue(),Qt(),ie(),me(Re),pe(de()),Yt(xe.forRoot({cart:Ce,products:be}),Ve.forRoot([at]),mn.instrument({maxAge:25}))]};var ft=class t{store=y(L);platformId=y(ee);channel;lastSent="";constructor(){if(!ce(this.platformId))return;this.channel=new BroadcastChannel("cart_channel");let e=localStorage.getItem("cart_items");if(e)try{JSON.parse(e).forEach(n=>this.store.dispatch(Q.addToCart({item:n})))}catch(o){console.error("Failed to parse saved cart from localStorage",o)}this.channel.onmessage=o=>{let n=o.data,i=this.store.selectSignal(yt.selectCartItems)().map(c=>c.id+c.quantity).join(","),f=n.map(c=>c.id+c.quantity).join(",");i!==f&&(this.store.dispatch(Q.clearCart()),n.forEach(c=>this.store.dispatch(Q.addToCart({item:c}))))},se(()=>{let o=this.store.selectSignal(yt.selectCartItems)(),n=o.map(r=>r.id+r.quantity).join(",");n!==this.lastSent&&(this.channel?.postMessage(o),localStorage.setItem("cart_items",JSON.stringify(o)),this.lastSent=n)})}ngOnDestroy(){this.channel?.close()}static \u0275fac=function(o){return new(o||t)};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})};var ut=class t{_cartSync=y(ft);static \u0275fac=function(o){return new(o||t)};static \u0275cmp=ne({type:t,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"bg-orange-500","text-white","p-4","shadow-md"],[1,"max-w-7xl","mx-auto","flex","justify-between","items-center"],[1,"text-2xl","font-bold"],[1,"space-x-4"],["routerLink","/",1,"hover:text-yellow-200","transition","font-semibold"],["routerLink","/products",1,"hover:text-yellow-200","transition","font-semibold"],["routerLink","/cart",1,"hover:text-yellow-200","transition","font-semibold"],[1,"bg-orange-100","min-h-screen"],[1,"max-w-7xl","mx-auto","p-6"]],template:function(o,n){o&1&&(_(0,"nav",0)(1,"div",1)(2,"div",2),G(3,"Webshop"),$(),_(4,"div",3)(5,"a",4),G(6,"F\u0151oldal"),$(),_(7,"a",5),G(8,"Term\xE9kek"),$(),_(9,"a",6),G(10,"Kos\xE1r"),$()()()(),_(11,"main",7)(12,"section",8),oe(13,"router-outlet"),$()())},dependencies:[le,he],encapsulation:2})};ae(ut,En).catch(t=>console.error(t));
